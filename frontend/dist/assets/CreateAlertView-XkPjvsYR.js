import{a as n}from"./axios-B6xwUs71.js";import{_ as p,n as c,c as m,a as e,w as o,e as s,t as _,q as g,u as h,f as b,o as f}from"./index-C6X_6u4j.js";const A={data(){return{alerts:{latitude:null,longitude:null,triage:null,radius:null,expiresIn:null,isActive:!1,description:"",timeForAmbulance:null,emergency:null},triageValid:!0}},methods:{handleAlertCreation(){n.post("http://localhost:3000/api/v1/alerts",this.alerts,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{console.log("ALERT CREATED SUCCESFULLY: ",r.data),console.log(this.alerts),alert("Alert created successfully"),n.get(`http://localhost:3000/api/v1/alerts/${r.data._id}/users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{t.data.forEach(u=>{n.post("http://localhost:3000/api/v1/emails/alert-notification",{email:u.email})})}),this.alerts={latitude:null,longitude:null,triage:null,radius:null,expiresIn:null,isActive:!1,description:"",timeForAmbulance:null,emergency:null},this.$router.push("/action118")},r=>{console.error("Alert creation failed",r),alert("Alert creation failed")}).catch(r=>{console.error("Axios request failed:",r)})}}},v={class:"alert-creation-container"},x=e("h2",null,"Alert Creation",-1),y={class:"input-group"},V=e("label",{for:"latitude"},"Latitude",-1),k={class:"input-group"},C=e("label",{for:"longitude"},"Longitude",-1),U={class:"input-group"},I=e("label",{for:"triage"},"Triage",-1),q={class:"input-group"},E=e("label",{for:"radius"},"Radius (in km)",-1),F={class:"input-group"},w=e("label",{for:"expiresIn"},"Expires in (minutes)",-1),B={class:"input-group"},D=e("label",{for:"isActive"},"Is Active",-1),L={class:"input-group"},S=e("label",{for:"Description"},"Description",-1),T={class:"input-group"},R=e("label",{for:"timeForAmbulance"},"Time Ambulance (in minutes)",-1),M={class:"input-group"},z=e("label",{for:"emergency"},"Emergency",-1),N={class:"container_buttons_inside_form"},G=e("button",{type:"Create",class:"button_inside_form"},"Dirama Alert",-1),Y=e("button",{type:"reset",class:"button_inside_form"},"Reset",-1),j=e("button",null,"Go back",-1);function H(r,t,u,J,l,a){const d=c("router-link");return f(),m("div",v,[e("form",{onSubmit:t[9]||(t[9]=b((...i)=>a.handleAlertCreation&&a.handleAlertCreation(...i),["prevent"])),class:"alert-form"},[x,e("div",y,[V,o(e("input",{type:"number",id:"latitude","onUpdate:modelValue":t[0]||(t[0]=i=>l.alerts.latitude=i),step:"0.0000001",required:""},null,512),[[s,l.alerts.latitude]])]),e("div",k,[C,o(e("input",{type:"number",id:"longitude","onUpdate:modelValue":t[1]||(t[1]=i=>l.alerts.longitude=i),step:"0.0000001",required:""},null,512),[[s,l.alerts.longitude]])]),e("div",U,[I,o(e("input",{type:"number",min:"1",max:"5",id:"triage","onUpdate:modelValue":t[2]||(t[2]=i=>l.alerts.triage=i),required:""},null,512),[[s,l.alerts.triage]])]),e("div",q,[E,o(e("input",{type:"number",id:"radius","onUpdate:modelValue":t[3]||(t[3]=i=>l.alerts.radius=i),required:""},null,512),[[s,l.alerts.radius]])]),e("div",F,[w,o(e("input",{type:"number",id:"expiresIn","onUpdate:modelValue":t[4]||(t[4]=i=>l.alerts.expiresIn=i),required:""},null,512),[[s,l.alerts.expiresIn]])]),e("div",B,[D,o(e("input",{type:"checkbox",id:"isActive",checked:"checked","onUpdate:modelValue":t[5]||(t[5]=i=>l.alerts.isActive=i),required:""},null,512),[[_,l.alerts.isActive]])]),e("div",L,[S,o(e("input",{type:"text",id:"description","onUpdate:modelValue":t[6]||(t[6]=i=>l.alerts.description=i)},null,512),[[s,l.alerts.description]])]),e("div",T,[R,o(e("input",{type:"number",id:"timeForAmbulance","onUpdate:modelValue":t[7]||(t[7]=i=>l.alerts.timeForAmbulance=i)},null,512),[[s,l.alerts.timeForAmbulance]])]),e("div",M,[z,o(e("input",{type:"number",min:"1",max:"17",id:"emergency","onUpdate:modelValue":t[8]||(t[8]=i=>l.alerts.emergency=i)},null,512),[[s,l.alerts.emergency]])]),e("div",N,[G,Y,g(d,{to:"/action118",class:"button_inside_form"},{default:h(()=>[j]),_:1})])],32)])}const P=p(A,[["render",H]]);export{P as default};
