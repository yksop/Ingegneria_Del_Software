import{a as n}from"./axios-B6xwUs71.js";import{_ as p,c as r,a as e,f as l,w as h,e as w,y as _,z as u,o as d,p as f,b as m}from"./index-C6X_6u4j.js";const k={data(){return{token:"",tokenIsValid:!1,password:"",errorMessage:"Password reset token is invalid or has expired.",tokenExpired:!1}},async created(){this.token=this.$route.params.token;const t=`http://localhost:3000/api/v1/passwords/${this.token}`;n.get(t,{headers:{"Content-Type":"application/json"}}).then(s=>{if(s.status!==200)throw new Error("Token validation failed");this.tokenIsValid=!0}).catch(s=>{console.log("Request error:",s),this.errorMessage=s.response.data,this.tokenExpired=!0})},methods:{resetPassword(){const t=`http://localhost:3000/api/v1/passwords/${this.token}`;n.post(t,{password:this.password}).then(s=>{s.status===200&&(alert(s.data.message),window.location.href=s.data.redirectTo)}).catch(s=>{alert(s.response.data)})}}},c=t=>(f("data-v-4ccb98bb"),t=t(),m(),t),v={key:0,class:"container"},b={class:"row justify-content-center"},y={class:"col-md-6"},x={class:"card"},g={class:"card-body"},I=c(()=>e("h2",{class:"new-password"},"New Password",-1)),P={class:"form-group"},V=c(()=>e("button",{type:"submit",class:"btn btn-primary"}," Reset Password ",-1)),E={key:1},M={key:0,class:"text-danger"};function S(t,s,N,T,o,i){return o.tokenIsValid?(d(),r("div",v,[e("div",b,[e("div",y,[e("div",x,[e("div",g,[I,e("form",{onSubmit:s[1]||(s[1]=l((...a)=>i.resetPassword&&i.resetPassword(...a),["prevent"]))},[e("div",P,[h(e("input",{id:"password",type:"password","onUpdate:modelValue":s[0]||(s[0]=a=>o.password=a),class:"form-control",placeholder:"New password",required:""},null,512),[[w,o.password]])]),V],32)])])])])])):(d(),r("div",E,[o.tokenExpired?(d(),r("p",M,_(o.errorMessage),1)):u("",!0)]))}const j=p(k,[["render",S],["__scopeId","data-v-4ccb98bb"]]);export{j as default};
